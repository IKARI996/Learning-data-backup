AW.Formats.XMLString=AW.System.Format.subclass();AW.Formats.XMLString.create=function(){var gzl=this.prototype;var zjz=this.superclass.prototype;gzl.init=function(){zjz.init.call(this);};gzl.dataToText=function(vskb){return(ppd(vskb));};gzl.dataToValue=function(vskb){return(this.dataToText(vskb).toLowerCase());};gzl.comparator=xyw;};function slx(wnw,trm,tbd,djvb,rsq,kkk,dj){var wqhb=new AW.UI.SUBasicGrid(wnw,trm,tbd);if(wqhb!=undefined){if(dj!=true){wqhb.m_XMLTable=new AW.XML.GridTable(rsq);wqhb.setCellModel(wqhb.m_XMLTable);}wqhb.onRowDoubleClicked=kkk;wqhb.refresh();if((typeof(djvb)!="undefined")&&(djvb!="")){wqhb.setTimeout(function(){this.Update(djvb,true);},0);}}return(wqhb);}function xzgb(wqhb){var element=document.getElementById(wqhb.getId());element.style.backgroundPosition="50%";element.style.backgroundRepeat="no-repeat";element.style.backgroundImage="url("+tjmb+"BusyGrid.gif)";}AW.XML.GridTable=AW.XML.Table.subclass();AW.XML.GridTable.create=function(){var gzl=this.prototype;var zjz=this.superclass.prototype;gzl.init=function(rsq){zjz.init.call(this);if((typeof(rsq)!="undefined")&&(rsq!=""))this.setTable("//"+rsq);};gzl.responseDef=gzl.response;gzl.response=function(dgw){var khmb=true;if((this.$owner)&&(typeof(this.$owner.PreUpdate)!="undefined"))khmb=this.$owner.PreUpdate();if(khmb){this.responseDef(dgw);if(this.$owner.m_bFilterMode)this.$owner.FilterGrid(this.$owner.m_sSearchVal,this.$owner.m_nColPos,true,this.$owner.m_bAllowEmpty);if((this.$owner)&&(typeof(this.$owner.PostUpdate)!="undefined"))this.$owner.PostUpdate();}};gzl.requestDef=gzl.request;gzl.request=function(dyv){if((this.$owner)&&(dyv))xzgb(this.$owner);this.requestDef();};gzl.setData=function(bx,kpx,xwf){var lkkb=this.getNode(kpx,xwf);bx=encodeURIComponent(bx);if(AW.ie)lkkb.text=bx;else lkkb.textContent=bx;};gzl.setURLDef=gzl.setURL;gzl.setURL=function(xtl){var ymgb=new Date();this.setURLDef(cqqb+xtl+"&sync="+ymgb.getTime());};gzl.selectNodes=function(ljtb,gqb){var rdsb=new Array();if(gqb==undefined)gqb=this.getXML();if(AW.ie){var mkdb=gqb.selectNodes(ljtb);for(var ykqb=0;ykqb<mkdb.length;ykqb++)rdsb[ykqb]=mkdb[ykqb];}else{var ykqb=0;var mkdb=this.getXML().evaluate(ljtb,gqb,null,XPathResult.ANY_TYPE,null);var ptmb=mkdb.iterateNext();while(ptmb){rdsb[ykqb++]=ptmb;ptmb=mkdb.iterateNext();}}return(rdsb);};};AW.UI.SUBasicGrid=AW.UI.Grid.subclass();AW.UI.SUBasicGrid.create=function(){var gzl=this.prototype;var zjz=this.superclass.prototype;gzl.init=function(wnw,trm,tbd){zjz.init.call(this);this.setId(wnw);this.setHeaderText(trm);this.setColumnCount(trm.length);this.setSelectionMode("multi-row");this.setSelectionMultiple(true);this.setStyle("width","100%");this.setStyle("height","297");this.setCellTemplate(new AW.Templates.ImageText,0);this.setStyle("position","static");var dwz=new Array();for(var ykqb=0;ykqb<tbd.length;ykqb++){dwz[ykqb]=new AW.Formats.XMLString;this.setColumnWidth(tbd[ykqb],ykqb);}this.setCellFormat(dwz);this.m_dateLastSearch=0;this.m_sSearchStr="";};gzl.UpdateText=function(lqkb,kpx,xwf){this.m_XMLTable.setData(lqkb,kpx,xwf);this.setCellText(undefined,kpx,xwf);};gzl.Update=function(xtl,dyv,gthb){this.setCellModel(this.m_XMLTable);this.m_bKeepState=(gthb)?true:false;this.m_XMLTable.setURL(xtl);this.m_XMLTable.request(dyv);};gzl.PreUpdate=function(){this.m_nSortCol=this.getSortColumn();this.m_sSortDir=this.getSortDirection(this.m_nSortCol);if(typeof(this.m_fnPreUpdate)!="undefined")this.m_fnPreUpdate.call(this);return(true);};gzl.PostUpdate=function(){this.setVirtualMode(this.getRowCount()>=100);if(this.m_nSortCol>=0)this.sort(this.m_nSortCol,this.m_sSortDir);this.ResetCurrentRow();if(typeof(this.m_fnPostUpdate)!="undefined"){this.m_fnPostUpdate.call(this);}};gzl.ResetCurrentRow=function(){this.getRowIndices()?this.setCurrentRow(this.getRowIndices()[0]):this.setCurrentRow(0);this.setScrollTop(0);};gzl.setCellModelDef=gzl.setCellModel;gzl.setCellModel=function(smsb){this.setCellModelDef.call(this,smsb);function thdb(vc,dnn){var vskb=this.getCellData(vc,dnn);var jpbb=this.getCellFormat(vc,dnn);return jpbb?jpbb.dataToText(vskb,this,vc,dnn):vskb;};function klj(vc,dnn){var vskb=this.getCellData(vc,dnn);var jpbb=this.getCellFormat(vc,dnn);return jpbb?jpbb.dataToValue(vskb,this,vc,dnn):vskb;};this.setCellText(thdb);this.setCellValue(klj);};gzl.onHeaderClicked=function(Event,ykqb){var txr;if((ykqb==this.getSortColumn())&&((txr=this.getRowIndices())!="")){this.setSortDirection((this.getSortDirection(ykqb)=="ascending")?"descending":"ascending",ykqb);txr.reverse();this.setRowIndices(txr);return(true);}else return(false);};gzl.onKeyPress=function(event){var cbs=String.fromCharCode(event.keyCode||event.charCode).toLocaleLowerCase();var grx=new Date().getTime();var jnf=this.getSortColumn();var xps=this.getCellFormat(jnf);if((cbs!="")&&(jnf>=0)&&((!xps)||(xps.dataToValue("&",this,jnf,0)!="0"))){var zvn=this.getRowIndices();var ytq=0,qwq=this.getCurrentRow();var ftj=false;var ldrb="";if(qwq>=0){for(var ykqb in zvn){if(zvn[ykqb]==qwq){ytq=parseInt(ykqb);break;}}}if((grx-this.m_dateLastSearch)>750){this.m_sSearchStr=cbs;if(ytq)ytq++;}else this.m_sSearchStr+=cbs;this.m_dateLastSearch=grx;if((!this.ItemSearch(this.m_sSearchStr,jnf,zvn,ytq,this.getRowCount()))&&(ytq>0))this.ItemSearch(this.m_sSearchStr,jnf,zvn,0,ytq);}else{this.m_sSearchStr="";this.m_dateLastSearch=0;}};gzl.ItemSearch=function(cqkb,jnf,zvn,hsm,mvpb){var ftj=false;for(var ykqb=hsm;ykqb<mvpb;ykqb++){var ldrb=this.getCellText(jnf,zvn[ykqb]).substring(0,cqkb.length).toLocaleLowerCase();if(ldrb==cqkb){this.setSelectedRows([zvn[ykqb]]);this.setCurrentRow(zvn[ykqb]);ftj=true;break;}}return(ftj);};};function xyw(njmb,mqb,xqnb,equal,bmmb){return(function(vc,dnn){try{var fqfb=njmb[vc];var wvcb=njmb[dnn];var nlwb=false;var pttb;if(isNaN(fqfb)&&isNaN(wvcb)){fqfb=fqfb.toLocaleLowerCase();wvcb=wvcb.toLocaleLowerCase();pttb=fqfb.localeCompare(wvcb);}else nlwb=true;if(!nlwb){if(pttb>0){return mqb}if(pttb<0){return xqnb}return equal(vc,dnn);}else{if(fqfb>wvcb){return mqb}if(fqfb<wvcb){return xqnb}return equal(vc,dnn);}}catch(whp){return bmmb(vc,dnn,whp);}});}